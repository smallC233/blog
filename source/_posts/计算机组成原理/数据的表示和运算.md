---
title: 数据的表示和运算
---
# 数据的表示和运算

## BCD 码

Binary-Coded Decimal.

二进制方便计算机处理，但转换麻烦，且不如十进制看着直观，所以 BCD 码产生了，把十进制的每一位按照二进制编码就是 BCD 码，如 123D = 0001 0010 0011(8421)。

BCD 码包括 8421 码，余 3 码，2421 码等。

### 8421 码的加法运算

BCD 码的加法：

如果运算结果大于 9，则 +6（BCD 码只表示了 10 位，但 4 位二进制码逢 16 进 1，因此平移 6 位来保持进位一致）。

5 + 8 = 13

0101 + 1000 = 1101 $\overset{\\  +6}{\rightarrow}$ 1 0011（1 3）



## 字符串

### 大端存储和小端存储

![1](C:\Users\25394\Desktop\md\计算机组成原理\picture\1.png)



## 汉字的表示和编码

汉字 + 各种符号共 7445 个用**区位码**来表示，区位码有 94 个区和 94 个位。
如：`啊` 的区位码是 16 01（10H 01H）。

由于和其他其他国家的编码冲突，所以在区位码基础上 +20H 来避免冲突，称为**国标码**。
如 `啊` 的国标码是 30H 21H。

由于计算机中 0~80H 存储的是 ASCII 码，因此在国标码的基础上 +80H，称为**汉字内码**/**汉字机内码**（'内' 就是计算机内的意思）。
如 `啊` 的汉字内码是 B0H A1H。



## 校验码

码距: 两个合法码字对应位上数字的不同位的个数。



### 奇偶校验

奇校验: 保证一段数据中出现奇数个 1。

偶校验: 保证一段数据中出现偶数个 1。<span id="<span id=""> </span>> </span>

奇偶校验码一般放在有效信息的前面。（没有规定就自己去声明）



### 海明校验码

#### 定义

海明码主要设计用于检测并纠正单个比特错误，允许接收端检测并定位发生错误的位置，在错误只有一位时可以实现自动纠错。

#### 校验码位数

假设信息位有 n 位，校验位有 k 位。

k 个校验位可以表示 $2^k$ 个状态，用来存储 n + k 个出错位置和 1 个正确状态。

所以 $2^k \geq n + k + 1$, 即 $2^k - k - 1 \geq n$ 。

下表为 N 和 K 的对应关系：

| N    | 1    | 2-4  | 5-11 | 12-26 | 27-57 | 58-120 |
| ---- | ---- | ---- | ---- | ----- | ----- | ------ |
| K    | 2    | 3    | 4    | 5     | 6     | 7      |

#### 校验码生成

以 1010B 为例，在二进制表示下，信息位有 4 位，校验位有 3 位：

设信息位 $D_4D_3D_2D_1$, 校验位 $P_3P_2P_1$。

校验位 $P_i$ 的位置位于 $2^{i-1}$ （1,2,4,8,...）位中，信息位相对顺序不变：

| 位数 | 7     | 6     | 5     | 4     | 3     | 2     | 1     |
| ---- | ----- | ----- | ----- | ----- | ----- | ----- | ----- |
|      | $D_4$ | $D_3$ | $D_2$ | $P_3$ | $D_1$ | $P_2$ | $P_1$ |
| 值   | 1     | 0     | 1     | 0     | 0     | 1     | 0     |

$$
P_i = \bigoplus_{j = 1}^{4}{D_j \times (D_j\ 对应的位数\ \&\ 2^{i-1})}
$$

![2](C:\Users\25394\Desktop\md\计算机组成原理\picture\2.png)

#### 校验方式

根据传入的 $D_i'$ 再算一次 $P_i'$，令 $S_i = P_i \oplus P_i'$，把 $S_i$ 看成二进制数，这个数 S 就是发生错误的位数（S = 0 就是没有错误）。

#### 正确性

假设只有一位发生了错误，海明码一定能正确的定位到发生错误的位数：

* **当信息位错误时：**
  * 假设错误的是 $D_i$, 则 $D_i$ 对应的二进制位全部出错，最后组合成了它所在的位数。

* **当校验位错误时：**
  * 校验位位于 $2^i$ 的位置，出错了会在 $S_i = P_i \oplus P_i'$ 时定位到对应的位置。

* **当没有错误时：**
  * 前后过程一致，显然 $D_i = D_i',\ P_i=P_i',\ S = 0$。

在较低速率和低噪声的通信系统中，假设每个比特的错误发生是一个独立事件，错误率 $p$ 通常很低（例如 $10^{-6}$ 或更低）。在这种情况下，单比特错误的概率为 $p$，而双比特错误的概率为 $p^2$，海明码足够应对，其简单高效的特性使其在这些场景下非常实用。

在某些高噪声环境或特定故障模式下，多个比特错误的发生率可能显著增加，可以采用更复杂的纠错码（如 CRC、Reed-Solomon 码等）来提高可靠性。



### 循环冗余检验码

#### 定义

循环冗余码（Cyclic Redundancy Check, CRC）是一种用于检测数据传输或存储过程中错误的校验技术。它通过将数据视为一个二进制多项式，然后使用模 2 除法（不带进位的二进制除法）与预定义的生成多项式进行计算，生成一个较短的固定长度校验码。传输或存储时，将该校验码附加到数据后面，接收端使用相同的生成多项式进行校验，以判断数据是否被篡改或损坏。CRC 能有效检测出常见的传输错误，如单比特错误、突发错误等。

#### 生成

1. **选择生成多项式**：
   * 选择一个预定义的生成多项式（通过有限域数学理论分析和实践验证得到）。
   * 生成多项式是一个二进制数，其最高位和最低位必须是 1。
   * 例如，常见的生成多项式是 `CRC-32` 中使用的 `0x04C11DB7`。
   * 方便起见，下文选择 `1011` 作为生成多项式。 
2. **附加零位**：
   * 在待发送的数据后面附加与生成多项式长度减 1 相同数量的零位。
   * 例如，生成多项式是 4 位的，则附加 3 个零位。
3. **二进制模 2 除法，附加 CRC 码**：
   * 将附加零位后的数据视为一个二进制多项式，并使用生成多项式对其进行模 2 除法。
   * 模 2 除法与普通除法类似，但不进行进位操作，只执行异或运算。最终的余数即为 CRC 检测码。
   * 将生成的 CRC 码附加到原始数据的末尾，形成最终的数据帧。

![3](C:\Users\25394\Desktop\md\计算机组成原理\picture\3.png)

#### 校验

对传输得到的数据进行模 2 的二进制除法，除数也为 G(x)，如果余数为 0 则数据正确，不为 0 则数据错误。

#### 效验稳定性

下述的**条件**指的都是对**生成式**的条件，使用现成的生成式肯定都满足这些条件。码长就是校验码的总长度（信息位 + 校验位）。

1. **单比特错误**：
   * CRC 可以可靠地检测任何单比特错误，**本性能不受码长限制**。
   * 条件：生成多项式非 0 系数的个数大于 1。
2. **奇数个错误**：
   * 所有奇数个错误可以被检验出来。**本性能不受码长限制**。
   * 条件：生成多项式 $G(x)$ 非 0 系数的个数为偶数，或 $G(x)$ 包含因式 $(x+1)$，这两个条件等价，满足其中一个，则另一个必然满足。$(x+1)$ 是 $(x^i+1)$ 的因式，故 $G(x)$ 包含因式 $(x^i+1)$ 时也满足本条件。
3. **双比特错误**：
   * CRC 校验可检测出**一定码长内**所有“错误比特数量为2”的错误类型。
   * 对于 $GF(2)$ 域的一个非 0 多项式 $G(x)$，使得 $G(x)$ 整除 $x^e+1$ 的最小正整数 $e$，称为 $G(x)$ 的阶（order），有时也称为 𝐺(𝑥) 的周期（period）或指数（exponent)。例如，$G(x)=x^4+x+1$ 的阶为 15， $G(x)=x^4+x^3+x^2+1$ 的阶为 7。
   * 条件：**“一定码长内”**指的就是 CRC 校验码的总长度 $n$ 需要小于等于生成多项式 $G(x)$ 的阶 $e$。当码长 $n>e$ 时，间隔距离不等于整数倍 $e$ 的双比特错误类型也都能检出。
4. **三比特错误**：
   * **一定码长内**($n \le e$ 时)，可检测出错误比特数量 $\le3$ 的错误类型。
5. **单突发错误**（一段连续的错误）：
   * 可检测出所有的突发长度 $l\le$ 校验位长度 $r$ 的突发错误。
   * 当 $l = r + 1$ 时，该长度突发错误不能检出的比例为 $\frac{1}{2^{r-1}}$。
   * 当突发长度 $l > r + 1$ 时，该长度突发错误不能检出的比例为 $\frac{1}{2^r}$。
   * 能检测部分双突发错误。





























